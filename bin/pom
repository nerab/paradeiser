#!/usr/bin/env ruby

require 'bundler'
Bundler.require

require 'commander/import'
require 'paradeiser'
include Paradeiser

program :version, Paradeiser::VERSION
program :description, "Paradeiser is a command-line tool for the Pomodoro Technique. It keeps track of the current pomodoro and assists the user in managing active and past pomodori as well as breaks. Status commands and reports are provided to get insights."
program :help, 'Author', 'Nicholas E. Rabenau <nerab@gmx.at>'

global_option '-V', '--verbose', 'Enable verbose output'

command :start do |c|
  c.syntax  = "#{program(:name)} #{c.name}"
  c.summary = 'Start a new pomodoro'
  c.action Router.dispatch(c)
end

command :finish do |c|
  c.syntax  = "#{program(:name)} #{c.name}"
  c.summary = 'Finish the active pomodoro'
  c.action Router.dispatch(c)
end

command :report do |c|
  c.syntax  = "#{program(:name)} #{c.name}"
  c.summary = 'Show a report on all pomodori'
  c.action Router.dispatch(c)
end

command :status do |c|
  c.syntax  = "#{program(:name)} #{c.name}"
  c.summary = 'Show status of active pomodoro or break'
  c.option '--quiet', 'Be quiet - no output is printed. The exit code reflects the status.'
  c.action Router.dispatch(c)
end
